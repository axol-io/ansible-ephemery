# Tuned profile for Ethereum nodes
#
# This profile is optimized for running Ethereum consensus and execution clients,
# focusing on disk I/O, network performance, and CPU scheduling
#

[main]
summary=Optimized settings for Ethereum nodes
include=throughput-performance

[cpu]
governor=performance
energy_perf_bias=performance
min_perf_pct=100

[sysctl]
# File system and I/O settings
fs.file-max=1000000
fs.inotify.max_user_watches=524288
fs.inotify.max_user_instances=512

# Network settings for p2p connections
net.core.somaxconn=65535
net.core.netdev_max_backlog=65536
net.ipv4.tcp_max_syn_backlog=65536
net.ipv4.tcp_tw_reuse=1
net.ipv4.tcp_fin_timeout=15
net.ipv4.tcp_keepalive_time=600
net.ipv4.tcp_keepalive_probes=5
net.ipv4.tcp_keepalive_intvl=15

# Memory management
vm.swappiness=10
vm.vfs_cache_pressure=50
vm.dirty_ratio=10
vm.dirty_background_ratio=5

[vm]
transparent_hugepages=never

[disk]
readahead=>4096

[bootloader]
cmdline_ethernet=net.ifnames=0 biosdevname=0
cmdline_cpu=intel_pstate=performance

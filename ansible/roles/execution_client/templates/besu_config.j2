# Besu Configuration for Ephemery Network
# Generated by Ansible - Do not edit manually

# Basic Settings
data-path = "{{ besu_data_dir }}"
logging = "{{ besu_log_level }}"

# Network settings
network = "{{ besu_network }}"
p2p-port = {{ el_p2p_port }}
max-peers = 50
discovery-enabled = true

# Chain settings
sync-mode = "{{ el_syncmode }}"
data-storage-format = "{{ besu_data_storage_format }}"

# Engine API (for Consensus Layer connection)
engine-jwt-secret = "{{ el_jwt_path }}"
engine-rpc-enabled = true
engine-host-allowlist = ["*"]

# HTTP JSON-RPC settings
{% if el_http_enabled %}
rpc-http-enabled = true
rpc-http-host = "0.0.0.0"
rpc-http-port = {{ el_http_port }}
rpc-http-api = ["{{ el_http_api | replace(',', '","') }}"]
rpc-http-cors-origins = ["*"]
{% else %}
rpc-http-enabled = false
{% endif %}

# WebSocket JSON-RPC settings
{% if el_ws_enabled %}
rpc-ws-enabled = true
rpc-ws-host = "0.0.0.0"
rpc-ws-port = {{ el_ws_port }}
rpc-ws-api = ["{{ el_http_api | replace(',', '","') }}"]
{% else %}
rpc-ws-enabled = false
{% endif %}

# Metrics settings
{% if el_metrics_enabled %}
metrics-enabled = true
metrics-host = "0.0.0.0"
metrics-port = {{ el_metrics_port }}
{% else %}
metrics-enabled = false
{% endif %}

# Performance settings
Xmx = "4g"
Xms = "2g"

# Security settings
host-allowlist = ["*"]
nat-method = "AUTO" 
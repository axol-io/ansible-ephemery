server:
  log_level: info
  http_listen_port: {{ grafana_agent_http_port }}

prometheus:
  wal_directory: /tmp/grafana-agent-wal
  global:
    scrape_interval: 15s
    evaluation_interval: 15s
  configs:
    - name: integrations
      scrape_configs:
        - job_name: "prometheus"
          static_configs:
            - targets: ["localhost:9090"]
        - job_name: "node-exporter"
          static_configs:
            - targets: ["localhost:9100"]
        - job_name: "cadvisor"
          static_configs:
            - targets: ["localhost:{{ cadvisor_port }}"]
        - job_name: "grafana-agent"
          static_configs:
            - targets: ["localhost:{{ grafana_agent_http_port }}"]

integrations:
  node_exporter:
    enabled: true
  prometheus_remote_write:
    - url: "http://localhost:{{ prometheus_port }}/api/v1/write"

---
dependency:
  name: galaxy
driver:
  name: docker
platforms:
  - name: ethereum-monitoring
    image: ubuntu:22.04
    pre_build_image: true
    privileged: true
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
      - /var/run/docker.sock:/var/run/docker.sock
    command: "/lib/systemd/systemd"
    exposed_ports:
      - 9090  # Prometheus
      - 3000  # Grafana
      - 8080  # Cadvisor
provisioner:
  name: ansible
  inventory:
    host_vars:
      ethereum-monitoring:
        el: geth
        cl: lighthouse
        network: ephemery
        ephemery_base_dir: "/home/ubuntu/ephemery"
        ephemery_data_dir: "/home/ubuntu/ephemery/data"
        ephemery_logs_dir: "/home/ubuntu/ephemery/logs"
        ephemery_scripts_dir: "/home/ubuntu/ephemery/scripts"
        ephemery_backup_dir: "/home/ubuntu/ephemery/backups"
        jwt_secret_path: "/home/ubuntu/ephemery/jwtsecret"
        # Monitoring specific settings
        validator_enabled: false
        backup_enabled: false
        firewall_enabled: false
        # Monitor service ports
        prometheus_port: 9090
        grafana_port: 3000
        grafana_agent_http_port: 12345
        cadvisor_port: 8080
        cadvisor_enabled: true
        # Add Grafana admin password
        grafana_admin_password: "admin_password_test"
        node_exporter_port: 9100
        node_exporter_name: "node-exporter"
verifier:
  name: ansible
